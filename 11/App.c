/*********************************************************************************************************
* 模块名称: App.c
* 摘    要: 
* 当前版本: 
* 作    者: 
* 完成日期: 
* 内    容:
* 注    意:                                                                   
**********************************************************************************************************
* 取代版本: 
* 作    者:
* 完成日期: 
* 修改内容:
* 修改文件: 
*********************************************************************************************************/

/*********************************************************************************************************
*                                              包含头文件
*********************************************************************************************************/
#include<stdio.h>

#include "Queue.h"

/*********************************************************************************************************
*                                              宏定义
*********************************************************************************************************/

/*********************************************************************************************************
*                                              枚举结构体定义
*********************************************************************************************************/

/*********************************************************************************************************
*                                              内部变量
*********************************************************************************************************/

/*********************************************************************************************************
*                                              内部函数声明
*********************************************************************************************************/

/*********************************************************************************************************
*                                              内部函数实现
*********************************************************************************************************/
/*********************************************************************************************************
* 函数名称: 
* 函数功能: 
* 输入参数: 
* 输出参数: 
* 返 回 值: 
* 创建日期: 
* 注    意: 
*********************************************************************************************************/

/*********************************************************************************************************
*                                              API函数实现
*********************************************************************************************************/
/*********************************************************************************************************
* 函数名称: 
* 函数功能: 
* 输入参数: 
* 输出参数: 
* 返 回 值: 
* 创建日期: 
* 注    意: 
*********************************************************************************************************/
int main(void) {
    StructCirQue cirQueForTest;
    DATA_TYPE i;
    DATA_TYPE bufForTest[30];

    i16 len;

    DATA_TYPE arrBufForOutput[30];
    DATA_TYPE arrBufForInput[60];
    DATA_TYPE dataForTest;

    for (int i = 0; i < 60; i++) {
        arrBufForInput[i] = 60 + i * 2 + 1;
    }

    for(i = 0; i < 30; i++) {
        arrBufForOutput[i] = 0;
    }

    InitQueue(&cirQueForTest, bufForTest, 30);

    // 入队16个元素
    printf("*******************TEST1-入队16个数据***************\n");
    EnQueue(&cirQueForTest, arrBufForInput, 16);

    for(i = 0; i < 30; i++) {
        dataForTest = cirQueForTest.pBuffer[i];
        printf("addr = %d, dataInput = %d\n", i, dataForTest);
    }

    //尝试出队25数据，实际只能出队16个数据
    printf("*******************TEST2-出队25个数据，实际只能出队16个数据***************\n");
    len = DeQueue(&cirQueForTest, arrBufForOutput, 25);

    printf("Num of DeQue: %d\n", len);

    for(i = 0; i < len; i++) {
        printf("i = %d, dataOput = %d\n", i, arrBufForOutput[i]);
    }

    // 入队20个数据
    printf("*******************TEST3-入队20个数据***************\n");

    len = EnQueue(&cirQueForTest, &arrBufForInput[20], 20);
    for(i = 0; i < 30; i++) {
        printf("Num of EnQueue: %d\n", len);

        dataForTest = cirQueForTest.pBuffer[i];
        printf("addr = %d, dataInput = %d\n", i, dataForTest);
    }

    //出队20个数据
    printf("*******************TEST3-出队20个数据***************\n");

    len = DeQueue(&cirQueForTest, arrBufForOutput, 20);

    printf("Num of DeQueue: %d\n", len);

    for(i = 0; i < len; i++) {
        printf("i = %d, dataOutput = %d\n", i, arrBufForOutput[i]);
    }

    return 0;
}
